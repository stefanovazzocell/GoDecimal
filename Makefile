.PHONY: fmt
fmt:
	@go vet ./...
	@go fmt ./...
	@staticcheck ./...

.PHONY: test
test:
	@go test --race --cover ./...

.PHONY: bench
bench:
	@go test --cover --bench=. ./...

.PHONY: fuzz
fuzz:
	@echo "Please use fuzz-fast for a quick test or fuzz-slow if you have an hour or more"

.PHONY: fuzz-fast
fuzz-fast:
	@echo "[ðŸ§ª] Fuzzing... (1/4)"
	@go test --fuzztime 45s --fuzz "FuzzHelpers" ./...
	@echo "[ðŸ§ª] Fuzzing... (2/4)"
	@go test --fuzztime 45s --fuzz "FuzzUtils" ./...
	@echo "[ðŸ§ª] Fuzzing... (3/4)"
	@go test --fuzztime 50s --fuzz "FuzzAdd" ./...
	@echo "[ðŸ§ª] Fuzzing... (4/4)"
	@go test --fuzztime 60s --fuzz "FuzzParseString" ./...

.PHONY: fuzz-slow
fuzz-slow:
	@echo "[ðŸ§ª] Fuzzing... (1/4)"
	@go test --fuzztime 15m --fuzz "FuzzHelpers" ./...
	@echo "[ðŸ§ª] Fuzzing... (2/4)"
	@go test --fuzztime 15m --fuzz "FuzzUtils" ./...
	@echo "[ðŸ§ª] Fuzzing... (3/4)"
	@go test --fuzztime 20m --fuzz "FuzzAdd" ./...
	@echo "[ðŸ§ª] Fuzzing... (4/4)"
	@go test --fuzztime 25m --fuzz "FuzzParseString" ./...

.PHONY: full-test
full-test:
	@echo "[ðŸ§ª] This test will run a couple of hours, please take a break."
	@echo "[ðŸ§ª] Formatting..."
	@go vet
	@go fmt
	@echo "[ðŸ§ª] Testing... (1/2)"
	go test --race --cover ./...
	@echo "[ðŸ§ª] Testing... (2/2)"
	go test --race --cover --bench=. ./...
	@echo "[ðŸ§ª] Fuzzing... (1/4)"
	go test --fuzztime 25m --fuzz "FuzzHelpers" ./...
	@echo "[ðŸ§ª] Fuzzing... (2/4)"
	go test --fuzztime 25m --fuzz "FuzzUtils" ./...
	@echo "[ðŸ§ª] Fuzzing... (3/4)"
	go test --fuzztime 35m --fuzz "FuzzAdd" ./...
	@echo "[ðŸ§ª] Fuzzing... (4/4)"
	go test --fuzztime 40m --fuzz "FuzzParseString" ./...
